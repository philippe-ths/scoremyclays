exports.id=869,exports.ids=[869],exports.modules={5682:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},6180:(e,t,r)=>{Promise.resolve().then(r.bind(r,8401)),Promise.resolve().then(r.bind(r,615)),Promise.resolve().then(r.bind(r,8962))},8401:(e,t,r)=>{"use strict";r.d(t,{BottomNav:()=>S});var n=r(326),s=r(982),o=r(6041),i=r(8004),a=r(6421),c=r(882),l=r(3977),u=r(9323),d=r(9381),h=r(8474),m=r(5047),p=r(1664);let g=[{id:"home",label:"Home",href:"/",icon:s.Z,activeIcon:l.Z},{id:"stats",label:"Stats",href:"/stats",icon:o.Z,activeIcon:u.Z},{id:"shoot",label:"SHOOT",href:"/scoring",icon:i.Z,activeIcon:i.Z},{id:"history",label:"History",href:"/history",icon:a.Z,activeIcon:d.Z},{id:"profile",label:"Profile",href:"/profile",icon:c.Z,activeIcon:h.Z}];function S(){let e=(0,m.usePathname)(),t=(0,m.useRouter)(),r=(e,r)=>{"shoot"===r?t.push("/scoring"):t.push(e)};return n.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-clay-border shadow-lg z-50",children:n.jsx("div",{className:"container mx-auto px-2",children:n.jsx("div",{className:"flex items-center justify-around py-2",children:g.map(t=>{let s=e===t.href||"/"!==t.href&&e.startsWith(t.href),o=s?t.activeIcon:t.icon;return"shoot"===t.id?(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[n.jsx(p.z,{variant:"default",size:"icon",onClick:()=>r(t.href,t.id),className:"nav-shoot-button w-14 h-14 rounded-full shadow-lg transform transition-transform active:scale-95",children:n.jsx(o,{className:"h-8 w-8"})}),n.jsx("span",{className:"text-xs font-bold text-clay-primary mt-1",children:t.label})]},t.id):(0,n.jsxs)("button",{onClick:()=>r(t.href,t.id),className:`flex flex-col items-center py-2 px-3 min-w-[60px] transition-colors ${s?"text-clay-primary":"text-clay-text-secondary hover:text-clay-primary"}`,children:[n.jsx(o,{className:"h-6 w-6 mb-1"}),n.jsx("span",{className:"text-xs font-medium",children:t.label})]},t.id)})})})})}},1664:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var n=r(326),s=r(7577),o=r(6438),i=r(9360),a=r(1223);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-target",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hit:"btn-hit animate-button-press active:animate-button-press",miss:"btn-miss animate-button-press active:animate-button-press","no-bird":"btn-no-bird animate-button-press active:animate-button-press"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",touch:"h-16 px-6 text-lg font-bold min-w-touch min-h-touch","touch-lg":"h-20 px-8 text-xl font-bold min-w-[120px]"}},defaultVariants:{variant:"default",size:"default"}}),l=(0,s.forwardRef)(({className:e,variant:t,size:r,asChild:s=!1,loading:i=!1,disabled:l,children:u,...d},h)=>{let m=s?o.g7:"button";return n.jsx(m,{className:(0,a.cn)(c({variant:t,size:r,className:e})),ref:h,disabled:l||i,...d,children:i?(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),n.jsx("span",{children:"Loading..."})]}):u})});l.displayName="Button"},615:(e,t,r)=>{"use strict";r.d(t,{PowerSyncProvider:()=>i,Q:()=>a});var n=r(326),s=r(7577);let o=(0,s.createContext)({db:null,isConnected:!1,isInitialized:!1,error:null});function i({children:e}){let[t]=(0,s.useState)(null),[r,i]=(0,s.useState)(!1),[a,c]=(0,s.useState)(!1),[l,u]=(0,s.useState)(null);return n.jsx(o.Provider,{value:{db:t,isConnected:r,isInitialized:a,error:l},children:e})}let a=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("usePowerSync must be used within a PowerSyncProvider");return e}},8962:(e,t,r)=>{"use strict";r.d(t,{N:()=>u,ScoringProvider:()=>l});var n=r(326),s=r(7577),o=r(1223);let i={currentSession:null,currentPosition:0,currentTarget:0,isScoring:!1,canUndo:!1,lastAction:null};function a(e,t){switch(t.type){case"START_SESSION":{let r={id:(0,o.xv)(),groundName:t.payload.groundName.trim(),shooterName:t.payload.shooterName.trim(),date:new Date,positions:[],isComplete:!1,totalScore:0,totalTargets:0,percentage:0,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"};return{...e,currentSession:r,currentPosition:0,currentTarget:0,isScoring:!1,canUndo:!1,lastAction:null}}case"SETUP_POSITION":{if(!e.currentSession)return e;let r={id:(0,o.Lp)(),number:e.currentSession.positions.length+1,name:t.payload.trim(),shots:[],isComplete:!1,score:0},n={...e.currentSession,positions:[...e.currentSession.positions,r],updatedAt:new Date};return{...e,currentSession:n,currentPosition:n.positions.length-1,currentTarget:0,isScoring:!0,canUndo:!1,lastAction:null}}case"RECORD_SHOT":{if(!e.currentSession||!e.isScoring)return e;let r=e.currentSession.positions[e.currentPosition];if(!r||r.isComplete)return e;let n={id:(0,o.ao)(),targetNumber:r.shots.length+1,result:t.payload,timestamp:new Date},s=[...r.shots,n],i=(0,o.sY)(s),a=(0,o.px)({...r,shots:s}),c={...r,shots:s,score:i,isComplete:a},l=e.currentSession.positions.map((t,r)=>r===e.currentPosition?c:t),u=(0,o.MX)(l),d=l.reduce((e,t)=>e+t.shots.length,0),h={...e.currentSession,positions:l,totalScore:u,totalTargets:d,percentage:(0,o.Fp)(u,d),updatedAt:new Date};return{...e,currentSession:h,currentTarget:a?0:s.length,isScoring:!a,canUndo:!0,lastAction:t.payload}}case"UNDO_SHOT":{if(!e.currentSession||!e.canUndo)return e;let t=e.currentSession.positions[e.currentPosition];if(!t||0===t.shots.length)return e;let r=t.shots.slice(0,-1),n=(0,o.sY)(r),s={...t,shots:r,score:n,isComplete:!1},i=e.currentSession.positions.map((t,r)=>r===e.currentPosition?s:t),a=(0,o.MX)(i),c=i.reduce((e,t)=>e+t.shots.length,0),l={...e.currentSession,positions:i,totalScore:a,totalTargets:c,percentage:(0,o.Fp)(a,c),updatedAt:new Date};return{...e,currentSession:l,currentTarget:r.length,isScoring:!0,canUndo:r.length>0,lastAction:null}}case"COMPLETE_POSITION":return{...e,isScoring:!1,canUndo:!1,lastAction:null};case"COMPLETE_SESSION":{if(!e.currentSession)return e;let t={...e.currentSession,isComplete:!0,updatedAt:new Date};return{...e,currentSession:t,isScoring:!1,canUndo:!1,lastAction:null}}case"RESET_SESSION":return i;case"LOAD_SESSION":{if(!t.payload)return i;let r=t.payload,n=r.positions.findIndex(e=>!e.isComplete),s=-1===n?r.positions.length-1:n,o=r.positions[s];return{...e,currentSession:r,currentPosition:Math.max(0,s),currentTarget:o?o.shots.length:0,isScoring:!!o&&!o.isComplete,canUndo:!!o&&o.shots.length>0,lastAction:null}}default:return e}}let c=(0,s.createContext)(null);function l({children:e}){let[t,r]=(0,s.useReducer)(a,i);return n.jsx(c.Provider,{value:{state:t,startNewSession:e=>r({type:"START_SESSION",payload:e}),setupPosition:e=>r({type:"SETUP_POSITION",payload:e}),recordShot:e=>r({type:"RECORD_SHOT",payload:e}),undoLastShot:()=>r({type:"UNDO_SHOT"}),completePosition:()=>r({type:"COMPLETE_POSITION"}),completeSession:()=>r({type:"COMPLETE_SESSION"}),resetSession:()=>r({type:"RESET_SESSION"})},children:e})}function u(){let e=(0,s.useContext)(c);if(!e)throw Error("useScoring must be used within a ScoringProvider");return e}},1223:(e,t,r)=>{"use strict";r.d(t,{Fp:()=>c,Lp:()=>p,MX:()=>a,TD:()=>S,ao:()=>g,cb:()=>l,cn:()=>o,ni:()=>h,p6:()=>d,px:()=>u,sY:()=>i,xv:()=>m});var n=r(1135),s=r(1009);function o(...e){return(0,s.m6)((0,n.W)(e))}function i(e){return e.filter(e=>"hit"===e.result).length}function a(e){return e.reduce((e,t)=>e+t.score,0)}function c(e,t){return 0===t?0:Math.round(e/t*100)}function l(e){let t=e.shots.length,r=c(t,10);return{current:t,total:10,percentage:r}}function u(e){return e.shots.length>=10}function d(e){return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}function h(e){let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/36e5);return r<1?"Just now":r<24?`${r}h ago`:r<48?"Yesterday":`${Math.floor(r/24)}d ago`}function m(){return`session_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}function p(){return`position_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}function g(){return`shot_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}function S(e){return Object.entries(e.reduce((e,t)=>{let r=t.groundName;return e[r]||(e[r]=[]),e[r].push(t),e},{})).sort(([,e],[,t])=>{let r=Math.max(...e.map(e=>new Date(e.date).getTime()));return Math.max(...t.map(e=>new Date(e.date).getTime()))-r})}},9187:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h,metadata:()=>u,viewport:()=>d});var n=r(9510),s=r(5317),o=r.n(s);r(5023);var i=r(8570);let a=(0,i.createProxy)(String.raw`/Users/ianmarr/projects/scoremyclays/src/components/layout/bottom-nav.tsx#BottomNav`),c=(0,i.createProxy)(String.raw`/Users/ianmarr/projects/scoremyclays/src/context/powersync-context.tsx#PowerSyncProvider`);(0,i.createProxy)(String.raw`/Users/ianmarr/projects/scoremyclays/src/context/powersync-context.tsx#usePowerSync`);let l=(0,i.createProxy)(String.raw`/Users/ianmarr/projects/scoremyclays/src/context/scoring-context.tsx#ScoringProvider`);(0,i.createProxy)(String.raw`/Users/ianmarr/projects/scoremyclays/src/context/scoring-context.tsx#useScoring`);let u={title:"ScoreMyClays - Clay Shooting Scorer",description:"Offline-first clay pigeon shooting score tracking for Sporting Clays",generator:"Next.js",manifest:"/manifest.json",keywords:["clay shooting","sporting clays","score tracking","offline scoring"],authors:[{name:"ScoreMyClays Team"}],icons:[{rel:"apple-touch-icon",url:"/icons/icon-192.png"},{rel:"icon",url:"/icons/icon-192.png"}]},d={minimumScale:1,initialScale:1,width:"device-width",viewportFit:"cover",themeColor:"#2C5530"};function h({children:e}){return n.jsx("html",{lang:"en",className:"h-full",children:n.jsx("body",{className:`${o().className} h-full bg-clay-bg antialiased`,children:n.jsx(c,{children:n.jsx(l,{children:(0,n.jsxs)("div",{className:"min-h-full pb-20",children:[e,n.jsx(a,{})]})})})})})}},5023:()=>{}};