"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[509],{9376:function(e,t,n){var r=n(5475);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},8935:function(e,t,n){let r,o;n.d(t,{z:function(){return h}});var i=n(7437),s=n(2265);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var a=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:n,...r}=e;if(s.isValidElement(n)){let e,o;let i=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,a=function(e,t){let n={...t};for(let r in t){let o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...e)=>{let t=i(...e);return o(...e),t}:o&&(n[r]=o):"style"===r?n[r]={...o,...i}:"className"===r&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==s.Fragment&&(a.ref=t?function(...e){return t=>{let n=!1,r=e.map(e=>{let r=u(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():u(e[t],null)}}}}(t,i):i),s.cloneElement(n,a)}return s.Children.count(n)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=s.forwardRef((e,n)=>{let{children:r,...o}=e,u=s.Children.toArray(r),a=u.find(l);if(a){let e=a.props.children,r=u.map(t=>t!==a?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...o,ref:n,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,i.jsx)(t,{...o,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}("Slot"),c=Symbol("radix.slottable");function l(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var d=n(1994);let f=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,p=d.W;var S=n(3448);let g=(r="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-target",o={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hit:"btn-hit animate-button-press active:animate-button-press",miss:"btn-miss animate-button-press active:animate-button-press","no-bird":"btn-no-bird animate-button-press active:animate-button-press"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",touch:"h-16 px-6 text-lg font-bold min-w-touch min-h-touch","touch-lg":"h-20 px-8 text-xl font-bold min-w-[120px]"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==o?void 0:o.variants)==null)return p(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:n,defaultVariants:i}=o,s=Object.keys(n).map(t=>{let r=null==e?void 0:e[t],o=null==i?void 0:i[t];if(null===r)return null;let s=f(r)||f(o);return n[t][s]}),u=e&&Object.entries(e).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return p(r,s,null==o?void 0:null===(t=o.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:n,className:r,...o}=t;return Object.entries(o).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...i,...u}[t]):({...i,...u})[t]===n})?[...e,n,r]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),h=(0,s.forwardRef)((e,t)=>{let{className:n,variant:r,size:o,asChild:s=!1,loading:u=!1,disabled:c,children:l,...d}=e,f=s?a:"button";return(0,i.jsx)(f,{className:(0,S.cn)(g({variant:r,size:o,className:n})),ref:t,disabled:c||u,...d,children:u?(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),(0,i.jsx)("span",{children:"Loading..."})]}):l})});h.displayName="Button"},2616:function(e,t,n){n.d(t,{PowerSyncProvider:function(){return u},Q:function(){return a}});var r=n(7437),o=n(2265),i=n(257);let s=(0,o.createContext)({db:null,isConnected:!1,isInitialized:!1,error:null});function u(e){let{children:t}=e,[n]=(0,o.useState)(null),[u,a]=(0,o.useState)(!1),[c,l]=(0,o.useState)(!1),[d,f]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{try{let e=i.env.NEXT_PUBLIC_POWERSYNC_URL,t=i.env.NEXT_PUBLIC_SUPABASE_URL,n=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t||!n){l(!0);return}a(!1),l(!0)}catch(e){f(e instanceof Error?e.message:"Unknown error"),l(!0)}})()},[]),(0,r.jsx)(s.Provider,{value:{db:n,isConnected:u,isInitialized:c,error:d},children:t})}let a=()=>{let e=(0,o.useContext)(s);if(!e)throw Error("usePowerSync must be used within a PowerSyncProvider");return e}},6966:function(e,t,n){n.d(t,{N:function(){return l},ScoringProvider:function(){return c}});var r=n(7437),o=n(2265),i=n(3448);let s={currentSession:null,currentPosition:0,currentTarget:0,isScoring:!1,canUndo:!1,lastAction:null};function u(e,t){switch(t.type){case"START_SESSION":{let n={id:(0,i.xv)(),groundName:t.payload.groundName.trim(),shooterName:t.payload.shooterName.trim(),date:new Date,positions:[],isComplete:!1,totalScore:0,totalTargets:0,percentage:0,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"};return{...e,currentSession:n,currentPosition:0,currentTarget:0,isScoring:!1,canUndo:!1,lastAction:null}}case"SETUP_POSITION":{if(!e.currentSession)return e;let n={id:(0,i.Lp)(),number:e.currentSession.positions.length+1,name:t.payload.trim(),shots:[],isComplete:!1,score:0},r={...e.currentSession,positions:[...e.currentSession.positions,n],updatedAt:new Date};return{...e,currentSession:r,currentPosition:r.positions.length-1,currentTarget:0,isScoring:!0,canUndo:!1,lastAction:null}}case"RECORD_SHOT":{if(!e.currentSession||!e.isScoring)return e;let n=e.currentSession.positions[e.currentPosition];if(!n||n.isComplete)return e;let r={id:(0,i.ao)(),targetNumber:n.shots.length+1,result:t.payload,timestamp:new Date},o=[...n.shots,r],s=(0,i.sY)(o),u=(0,i.px)({...n,shots:o}),a={...n,shots:o,score:s,isComplete:u},c=e.currentSession.positions.map((t,n)=>n===e.currentPosition?a:t),l=(0,i.MX)(c),d=c.reduce((e,t)=>e+t.shots.length,0),f={...e.currentSession,positions:c,totalScore:l,totalTargets:d,percentage:(0,i.Fp)(l,d),updatedAt:new Date};return{...e,currentSession:f,currentTarget:u?0:o.length,isScoring:!u,canUndo:!0,lastAction:t.payload}}case"UNDO_SHOT":{if(!e.currentSession||!e.canUndo)return e;let t=e.currentSession.positions[e.currentPosition];if(!t||0===t.shots.length)return e;let n=t.shots.slice(0,-1),r=(0,i.sY)(n),o={...t,shots:n,score:r,isComplete:!1},s=e.currentSession.positions.map((t,n)=>n===e.currentPosition?o:t),u=(0,i.MX)(s),a=s.reduce((e,t)=>e+t.shots.length,0),c={...e.currentSession,positions:s,totalScore:u,totalTargets:a,percentage:(0,i.Fp)(u,a),updatedAt:new Date};return{...e,currentSession:c,currentTarget:n.length,isScoring:!0,canUndo:n.length>0,lastAction:null}}case"COMPLETE_POSITION":return{...e,isScoring:!1,canUndo:!1,lastAction:null};case"COMPLETE_SESSION":{if(!e.currentSession)return e;let t={...e.currentSession,isComplete:!0,updatedAt:new Date};return{...e,currentSession:t,isScoring:!1,canUndo:!1,lastAction:null}}case"RESET_SESSION":return s;case"LOAD_SESSION":{if(!t.payload)return s;let n=t.payload,r=n.positions.findIndex(e=>!e.isComplete),o=-1===r?n.positions.length-1:r,i=n.positions[o];return{...e,currentSession:n,currentPosition:Math.max(0,o),currentTarget:i?i.shots.length:0,isScoring:!!i&&!i.isComplete,canUndo:!!i&&i.shots.length>0,lastAction:null}}default:return e}}let a=(0,o.createContext)(null);function c(e){let{children:t}=e,[n,c]=(0,o.useReducer)(u,s);return(0,o.useEffect)(()=>{if(n.currentSession)try{localStorage.setItem(i.I.CURRENT_SESSION,JSON.stringify(n.currentSession))}catch(e){}else localStorage.removeItem(i.I.CURRENT_SESSION)},[n.currentSession]),(0,o.useEffect)(()=>{try{let e=localStorage.getItem(i.I.CURRENT_SESSION);if(e){let t=JSON.parse(e,(e,t)=>"date"===e||"createdAt"===e||"updatedAt"===e?new Date(t):t);c({type:"LOAD_SESSION",payload:t})}}catch(e){}},[c]),(0,r.jsx)(a.Provider,{value:{state:n,startNewSession:e=>c({type:"START_SESSION",payload:e}),setupPosition:e=>c({type:"SETUP_POSITION",payload:e}),recordShot:e=>c({type:"RECORD_SHOT",payload:e}),undoLastShot:()=>c({type:"UNDO_SHOT"}),completePosition:()=>c({type:"COMPLETE_POSITION"}),completeSession:()=>c({type:"COMPLETE_SESSION"}),resetSession:()=>c({type:"RESET_SESSION"})},children:t})}function l(){let e=(0,o.useContext)(a);if(!e)throw Error("useScoring must be used within a ScoringProvider");return e}},3448:function(e,t,n){n.d(t,{Fp:function(){return a},I:function(){return h},Lp:function(){return S},MX:function(){return u},TD:function(){return m},ao:function(){return g},cb:function(){return c},cn:function(){return i},ni:function(){return f},p6:function(){return d},px:function(){return l},sY:function(){return s},xv:function(){return p}});var r=n(1994),o=n(3335);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)((0,r.W)(t))}function s(e){return e.filter(e=>"hit"===e.result).length}function u(e){return e.reduce((e,t)=>e+t.score,0)}function a(e,t){return 0===t?0:Math.round(e/t*100)}function c(e){let t=e.shots.length,n=a(t,10);return{current:t,total:10,percentage:n}}function l(e){return e.shots.length>=10}function d(e){return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}function f(e){let t=new Date(e),n=Math.floor((new Date().getTime()-t.getTime())/36e5);return n<1?"Just now":n<24?"".concat(n,"h ago"):n<48?"Yesterday":"".concat(Math.floor(n/24),"d ago")}function p(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}function S(){return"position_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}function g(){return"shot_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}let h={CURRENT_SESSION:"scoring_current_session",SESSIONS_CACHE:"scoring_sessions_cache",USER_PREFERENCES:"scoring_user_preferences"};function m(e){return Object.entries(e.reduce((e,t)=>{let n=t.groundName;return e[n]||(e[n]=[]),e[n].push(t),e},{})).sort((e,t)=>{let[,n]=e,[,r]=t,o=Math.max(...n.map(e=>new Date(e.date).getTime()));return Math.max(...r.map(e=>new Date(e.date).getTime()))-o})}}}]);