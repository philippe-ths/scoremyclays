(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[659],{4231:function(e,s,t){Promise.resolve().then(t.bind(t,1094))},1094:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var r=t(7437),l=t(2265),a=t(9376),i=t(4717),n=t(8935),c=t(9820);function o(e){let{currentPosition:s,sessionInfo:t,onPositionSetup:a}=e,[i,c]=l.useState("");return(0,r.jsxs)("div",{className:"p-4 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-lg font-bold text-clay-text-primary",children:["Position ",s," of 10"]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("span",{className:"text-sm text-clay-text-secondary",children:[t.groundName," - ",t.shooterName]})})]}),(0,r.jsx)("div",{className:"w-full bg-clay-border rounded-full h-2.5",children:(0,r.jsx)("div",{className:"bg-clay-primary h-2.5 rounded-full",style:{width:"".concat(s/10*100,"%")}})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"positionName",className:"block text-sm font-semibold text-clay-text-primary",children:"Position Name"}),(0,r.jsx)("input",{id:"positionName",type:"text",value:i,onChange:e=>c(e.target.value),placeholder:"Enter position name",className:"w-full h-12 px-4 py-3 text-base border-2 rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-clay-primary/20 border-clay-border bg-clay-surface-elevated focus:border-clay-primary hover:border-clay-primary/60"})]}),(0,r.jsxs)(n.z,{onClick:()=>{i.trim()&&(a(i.trim()),c(""))},size:"touch-lg",className:"w-full bg-clay-primary hover:bg-clay-primary-light text-white font-bold shadow-lg hover:shadow-xl transition-all duration-200",children:["Start Position ",s]})]})}var d=t(6966),m=t(3448);let x={POSITIONS_PER_SESSION:10,TARGETS_PER_POSITION:10};function u(){let{state:e,setupPosition:s,recordShot:t,undoLastShot:u,completePosition:h}=(0,d.N)(),f=(0,a.useRouter)(),[N,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!e.currentSession){f.push("/");return}},[e.currentSession,f]);let b=e=>{p(e),t(e),setTimeout(()=>p(null),300)};if(!e.currentSession)return null;let j=e.currentSession,y=j.positions[e.currentPosition];if((0,l.useEffect)(()=>{if(y&&y.isComplete&&e.currentPosition<x.POSITIONS_PER_SESSION-1){let e=setTimeout(()=>{},1500);return()=>clearTimeout(e)}},[null==y?void 0:y.isComplete,e.currentPosition]),!y||!e.isScoring)return(0,r.jsxs)("div",{className:"min-h-screen bg-clay-bg",children:[(0,r.jsx)(i.Header,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-6",children:(0,r.jsx)(o,{currentPosition:e.currentPosition+1,sessionInfo:{groundName:j.groundName,shooterName:j.shooterName},onPositionSetup:e=>{s(e)}})})]});let g=(0,m.cb)(y),v=(0,m.MX)(j.positions),S=j.positions.reduce((e,s)=>e+s.shots.length,0),P=(0,m.Fp)(v,S),w=y.shots.filter(e=>"hit"===e.result).length,C=y.shots.filter(e=>"miss"===e.result).length,O=y.shots.filter(e=>"no-bird"===e.result).length;return(0,r.jsxs)("div",{className:"min-h-screen bg-clay-bg",children:[(0,r.jsx)(i.Header,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[(0,r.jsx)(c.Zb,{className:"card-secondary p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsx)("span",{className:"font-semibold text-clay-text-primary",children:j.groundName}),(0,r.jsx)("span",{className:"text-clay-text-secondary",children:j.shooterName})]})}),(0,r.jsxs)(c.Zb,{className:"card-primary p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-clay-primary",children:v}),(0,r.jsx)("div",{className:"text-sm text-clay-text-secondary",children:"Session Score"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-clay-accent",children:[P,"%"]}),(0,r.jsx)("div",{className:"text-sm text-clay-text-secondary",children:"Hit Rate"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-green-600",children:w}),(0,r.jsx)("div",{className:"text-clay-text-secondary",children:"Position Hits"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-red-600",children:C}),(0,r.jsx)("div",{className:"text-clay-text-secondary",children:"Misses"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-orange-600",children:O}),(0,r.jsx)("div",{className:"text-clay-text-secondary",children:"No Birds"})]})]})]}),(0,r.jsxs)(c.Zb,{className:"card-secondary p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("h3",{className:"font-semibold text-clay-text-primary",children:["Position ",y.number," of"," ",x.POSITIONS_PER_SESSION]}),(0,r.jsx)("span",{className:"text-sm text-clay-text-secondary",children:y.name})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2 text-sm",children:[(0,r.jsxs)("span",{className:"text-clay-text-secondary",children:["Target ",g.current+1," of"," ",x.TARGETS_PER_POSITION]}),(0,r.jsxs)("span",{className:"font-semibold text-clay-text-primary",children:["Score: ",y.score,"/",g.current]})]}),(0,r.jsx)("div",{className:"w-full bg-clay-surface rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-clay-accent h-2 rounded-full transition-all duration-300",style:{width:"".concat(g.percentage,"%")}})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsx)(n.z,{variant:"hit",size:"touch-lg",onClick:()=>b("hit"),disabled:y.isComplete,className:"w-full h-24 text-2xl font-bold ".concat("hit"===N?"animate-pulse":""),children:"HIT"}),(0,r.jsx)(n.z,{variant:"miss",size:"touch-lg",onClick:()=>b("miss"),disabled:y.isComplete,className:"w-full h-24 text-2xl font-bold ".concat("miss"===N?"animate-pulse":""),children:"MISS"}),(0,r.jsx)(n.z,{variant:"no-bird",size:"touch-lg",onClick:()=>b("no-bird"),disabled:y.isComplete,className:"w-full h-24 text-2xl font-bold ".concat("no-bird"===N?"animate-pulse":""),children:"NO BIRD"})]}),g.current>=x.TARGETS_PER_POSITION&&!y.isComplete&&(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)(n.z,{variant:"default",size:"touch-lg",onClick:()=>{h()},className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold",children:["Complete Position ",y.number]})}),y.isComplete&&(0,r.jsx)(c.Zb,{className:"card-secondary border-2 border-green-500 bg-green-50 p-4 mt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-green-800 mb-2",children:["\uD83C\uDFAF Position ",y.number," Complete!"]}),(0,r.jsxs)("div",{className:"text-sm text-green-700",children:["Score: ",y.score,"/",x.TARGETS_PER_POSITION," (",(0,m.Fp)(y.score,x.TARGETS_PER_POSITION),"%)"]}),e.currentPosition<x.POSITIONS_PER_SESSION-1&&(0,r.jsx)("div",{className:"text-sm text-green-600 mt-2",children:"Moving to next position..."})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,r.jsx)(n.z,{variant:"outline",size:"touch",onClick:()=>{u()},disabled:!e.canUndo||y.isComplete,className:"font-semibold",children:"UNDO"}),(0,r.jsx)(n.z,{variant:"secondary",size:"touch",onClick:()=>{},className:"font-semibold",children:"PAUSE"})]})]}),j.positions.filter(e=>e.isComplete).length>0&&(0,r.jsxs)(c.Zb,{className:"card-secondary p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-clay-text-primary mb-3",children:"Completed Positions"}),(0,r.jsx)("div",{className:"grid grid-cols-5 gap-2",children:j.positions.filter(e=>e.isComplete).map(e=>(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"bg-clay-surface rounded-lg p-2",children:[(0,r.jsxs)("div",{className:"font-bold text-clay-primary",children:[e.score,"/",x.TARGETS_PER_POSITION]}),(0,r.jsx)("div",{className:"text-xs text-clay-text-secondary",children:e.name})]})},e.id))})]})]})]})}},4717:function(e,s,t){"use strict";t.d(s,{Header:function(){return i}});var r=t(7437),l=t(2616),a=t(3448);function i(e){let{title:s="ScoreMyClays",showBackButton:t=!1,onBack:i,className:n}=e,{isConnected:c,error:o}=(0,l.Q)();return(0,r.jsx)("header",{className:(0,a.cn)("sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 safe-top",n),children:(0,r.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[t&&(0,r.jsx)("button",{onClick:i,className:"flex h-10 w-10 items-center justify-center rounded-md hover:bg-accent","aria-label":"Go back",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:s})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:(0,a.cn)("h-2 w-2 rounded-full",c?"bg-green-500":o?"bg-red-500":"bg-yellow-500")}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:c?"Online":o?"Error":"Offline"})]})})]})})}},9820:function(e,s,t){"use strict";t.d(s,{Zb:function(){return i},aY:function(){return n}});var r=t(7437),l=t(2265),a=t(3448);let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});i.displayName="Card",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...l})}).displayName="CardHeader",l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,r.jsxs)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i,children:[l||"Untitled"," "]})}).displayName="CardTitle",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",t),...l})}).displayName="CardDescription";let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...l})});n.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"}},function(e){e.O(0,[432,509,971,117,744],function(){return e(e.s=4231)}),_N_E=e.O()}]);