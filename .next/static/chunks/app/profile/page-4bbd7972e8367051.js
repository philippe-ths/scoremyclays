(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178,740],{3487:function(e,n,t){Promise.resolve().then(t.bind(t,4717))},4717:function(e,n,t){"use strict";t.d(n,{Header:function(){return i}});var r=t(7437),o=t(2616),c=t(3448);function i(e){let{title:n="ScoreMyClays",showBackButton:t=!1,onBack:i,className:s}=e,{isConnected:u,error:a}=(0,o.Q)();return(0,r.jsx)("header",{className:(0,c.cn)("sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 safe-top",s),children:(0,r.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[t&&(0,r.jsx)("button",{onClick:i,className:"flex h-10 w-10 items-center justify-center rounded-md hover:bg-accent","aria-label":"Go back",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:n})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:(0,c.cn)("h-2 w-2 rounded-full",u?"bg-green-500":a?"bg-red-500":"bg-yellow-500")}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:u?"Online":a?"Error":"Offline"})]})})]})})}},2616:function(e,n,t){"use strict";t.d(n,{PowerSyncProvider:function(){return s},Q:function(){return u}});var r=t(7437),o=t(2265),c=t(257);let i=(0,o.createContext)({db:null,isConnected:!1,isInitialized:!1,error:null});function s(e){let{children:n}=e,[t]=(0,o.useState)(null),[s,u]=(0,o.useState)(!1),[a,l]=(0,o.useState)(!1),[f,d]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{try{let e=c.env.NEXT_PUBLIC_POWERSYNC_URL,n=c.env.NEXT_PUBLIC_SUPABASE_URL,t=c.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!n||!t){l(!0);return}u(!1),l(!0)}catch(e){d(e instanceof Error?e.message:"Unknown error"),l(!0)}})()},[]),(0,r.jsx)(i.Provider,{value:{db:t,isConnected:s,isInitialized:a,error:f},children:n})}let u=()=>{let e=(0,o.useContext)(i);if(!e)throw Error("usePowerSync must be used within a PowerSyncProvider");return e}},3448:function(e,n,t){"use strict";t.d(n,{Fp:function(){return u},I:function(){return x},Lp:function(){return m},MX:function(){return s},TD:function(){return _},ao:function(){return g},cb:function(){return a},cn:function(){return c},ni:function(){return d},p6:function(){return f},px:function(){return l},sY:function(){return i},xv:function(){return h}});var r=t(1994),o=t(3335);function c(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,o.m6)((0,r.W)(n))}function i(e){return e.filter(e=>"hit"===e.result).length}function s(e){return e.reduce((e,n)=>e+n.score,0)}function u(e,n){return 0===n?0:Math.round(e/n*100)}function a(e){let n=e.shots.length,t=u(n,10);return{current:n,total:10,percentage:t}}function l(e){return e.shots.length>=10}function f(e){return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}function d(e){let n=new Date(e),t=Math.floor((new Date().getTime()-n.getTime())/36e5);return t<1?"Just now":t<24?"".concat(t,"h ago"):t<48?"Yesterday":"".concat(Math.floor(t/24),"d ago")}function h(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}function m(){return"position_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}function g(){return"shot_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}let x={CURRENT_SESSION:"scoring_current_session",SESSIONS_CACHE:"scoring_sessions_cache",USER_PREFERENCES:"scoring_user_preferences"};function _(e){return Object.entries(e.reduce((e,n)=>{let t=n.groundName;return e[t]||(e[t]=[]),e[t].push(n),e},{})).sort((e,n)=>{let[,t]=e,[,r]=n,o=Math.max(...t.map(e=>new Date(e.date).getTime()));return Math.max(...r.map(e=>new Date(e.date).getTime()))-o})}}},function(e){e.O(0,[432,971,117,744],function(){return e(e.s=3487)}),_N_E=e.O()}]);