(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{5273:function(e,t,n){Promise.resolve().then(n.bind(n,4717)),Promise.resolve().then(n.bind(n,7458))},4717:function(e,t,n){"use strict";n.d(t,{Header:function(){return c}});var r=n(7437),s=n(2616),a=n(3448);function c(e){let{title:t="ScoreMyClays",showBackButton:n=!1,onBack:c,className:i}=e,{isConnected:o,error:l}=(0,s.Q)();return(0,r.jsx)("header",{className:(0,a.cn)("sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 safe-top",i),children:(0,r.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[n&&(0,r.jsx)("button",{onClick:c,className:"flex h-10 w-10 items-center justify-center rounded-md hover:bg-accent","aria-label":"Go back",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:t})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:(0,a.cn)("h-2 w-2 rounded-full",o?"bg-green-500":l?"bg-red-500":"bg-yellow-500")}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:o?"Online":l?"Error":"Offline"})]})})]})})}},7458:function(e,t,n){"use strict";n.d(t,{SessionHistory:function(){return i}});var r=n(7437),s=n(2265),a=n(9820),c=n(3448);function i(){let[e,t]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("scoring_sessions");if(e){let n=JSON.parse(e);t(n)}}catch(e){}finally{i(!1)}})()},[]),(0,c.TD)(e),n)?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Session History"}),(0,r.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,r.jsx)(a.Zb,{className:"animate-pulse",children:(0,r.jsxs)(a.aY,{className:"p-4",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},e))})]}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sessions yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Start your first scoring session to see it here"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-clay-primary",children:"Session History"}),(0,r.jsx)("div",{className:"space-y-3",children:e.map(e=>{let t=e.totalScore||0,n=e.totalTargets||0;return(0,r.jsx)(a.Zb,{className:"card-primary",children:(0,r.jsxs)(a.aY,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-clay-text-secondary",children:[(0,r.jsx)("span",{children:(0,c.p6)(e.date)}),(0,r.jsx)("span",{children:(0,c.ni)(e.date)})]}),(0,r.jsxs)("div",{className:"mt-2 text-clay-text-primary",children:[(0,r.jsx)("span",{className:"font-bold",children:t})," hits,"," ",(0,r.jsx)("span",{className:"font-bold",children:n-t})," misses",(0,r.jsxs)("span",{className:"ml-2 text-clay-accent",children:["(",n>0?Math.round(t/n*100):0,"%)"]})]})]})},e.id)})})]})}},9820:function(e,t,n){"use strict";n.d(t,{Zb:function(){return c},aY:function(){return i}});var r=n(7437),s=n(2265),a=n(3448);let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...s})});c.displayName="Card",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:n,children:s,...c}=e;return(0,r.jsxs)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...c,children:[s||"Untitled"," "]})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...s})}).displayName="CardDescription";let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...s})});i.displayName="CardContent",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...s})}).displayName="CardFooter"},2616:function(e,t,n){"use strict";n.d(t,{PowerSyncProvider:function(){return i},Q:function(){return o}});var r=n(7437),s=n(2265),a=n(257);let c=(0,s.createContext)({db:null,isConnected:!1,isInitialized:!1,error:null});function i(e){let{children:t}=e,[n]=(0,s.useState)(null),[i,o]=(0,s.useState)(!1),[l,u]=(0,s.useState)(!1),[d,f]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{let e=a.env.NEXT_PUBLIC_POWERSYNC_URL,t=a.env.NEXT_PUBLIC_SUPABASE_URL,n=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t||!n){u(!0);return}o(!1),u(!0)}catch(e){f(e instanceof Error?e.message:"Unknown error"),u(!0)}})()},[]),(0,r.jsx)(c.Provider,{value:{db:n,isConnected:i,isInitialized:l,error:d},children:t})}let o=()=>{let e=(0,s.useContext)(c);if(!e)throw Error("usePowerSync must be used within a PowerSyncProvider");return e}},3448:function(e,t,n){"use strict";n.d(t,{Fp:function(){return o},I:function(){return p},Lp:function(){return x},MX:function(){return i},TD:function(){return g},ao:function(){return h},cb:function(){return l},cn:function(){return a},ni:function(){return f},p6:function(){return d},px:function(){return u},sY:function(){return c},xv:function(){return m}});var r=n(1994),s=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}function c(e){return e.filter(e=>"hit"===e.result).length}function i(e){return e.reduce((e,t)=>e+t.score,0)}function o(e,t){return 0===t?0:Math.round(e/t*100)}function l(e){let t=e.shots.length,n=o(t,10);return{current:t,total:10,percentage:n}}function u(e){return e.shots.length>=10}function d(e){return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}function f(e){let t=new Date(e),n=Math.floor((new Date().getTime()-t.getTime())/36e5);return n<1?"Just now":n<24?"".concat(n,"h ago"):n<48?"Yesterday":"".concat(Math.floor(n/24),"d ago")}function m(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}function x(){return"position_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}function h(){return"shot_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}let p={CURRENT_SESSION:"scoring_current_session",SESSIONS_CACHE:"scoring_sessions_cache",USER_PREFERENCES:"scoring_user_preferences"};function g(e){return Object.entries(e.reduce((e,t)=>{let n=t.groundName;return e[n]||(e[n]=[]),e[n].push(t),e},{})).sort((e,t)=>{let[,n]=e,[,r]=t,s=Math.max(...n.map(e=>new Date(e.date).getTime()));return Math.max(...r.map(e=>new Date(e.date).getTime()))-s})}}},function(e){e.O(0,[432,971,117,744],function(){return e(e.s=5273)}),_N_E=e.O()}]);